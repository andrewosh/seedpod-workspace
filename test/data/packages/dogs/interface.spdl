import {
  Animal as OtherAnimal,
  Human
} from 'animals'
import {
  VIEW,
  EDIT,
  CREATE
} from '@seedpod/actions'

enum Energy {
  LOW,
  MEDIUM,
  HIGH
}

struct AgeInfo {
  birthday: string
  age: uint32
}

type Breed {
  name: string
  energy?: Energy
}

type Dog extends Animal {
  breed: Breed
}

type Walker extends Human {
  age: AgeInfo
  walking?: [Dog]
}

method createOldWalker (age: AgeInfo): Walker {}
method deleteAllWalkers (): bool {}

action ViewWalker extends VIEW {
  filter: Walker
}

action EditWalker extends EDIT {
  filter: Walker
}

action CreateWalker extends CREATE {
  returns: Walker
}


trigger oldWalkers (walker: Walker) {
  selector: {
    age: { $gt: 80 }
  }
}

query breedsForWalker (walker: string): [Breed] {
  SELECT ?breed WHERE {
    $walker field:Walker.walking ?o.
    ?o field:Dog.breed ?breed
  }
}

query linksToAnimals (): [Id] {
  SELECT ?o WHERE {
    ?o seedpod:is type:OtherAnimal
  }
}